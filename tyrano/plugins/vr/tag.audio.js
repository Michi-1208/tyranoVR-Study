tyrano.plugin.kag.tag.audio_new={vital:["id","storage"],pm:{id:"",folder:"",storage:"",preload:"true"},start:function(pm){var that=this;var j_assets=$("#vr_assets");if(pm.folder!="")folder=pm.folder;else folder="bgm";var storage_url="./data/"+folder+"/"+pm.storage;$.vr.exists(storage_url);var j_audio=$("<audio />");j_audio.attr("id",pm.id);j_audio.attr("src",storage_url);if(pm.preload=="true")j_audio.attr("preload","auto");j_assets.append(j_audio);TYRANO.kag.ftag.nextOrder()}};
tyrano.plugin.kag.tag.playbgm={vital:[],pm:{id:"",name:"",storage:"",loop:"true",volume:"100"},start:function(pm){var that=this;var el_audio=document.createElement("a-sound");if(pm.id!=""){$.vr.checkAsset(pm.id);el_audio.setAttribute("src","#"+pm.id)}else{pm.id=pm.storage;$.vr.exists(pm.storage);el_audio.setAttribute("src","./data/bgm/"+pm.storage)}el_audio.setAttribute("loop",pm.loop);el_audio.setAttribute("autoplay","true");var volume=$.cutFloat(parseFloat(pm.volume)/100,3);el_audio.setAttribute("volume",
volume);if(pm.name=="")pm.name=pm.id;$.vr.setName(el_audio,pm.name);document.querySelector("#vr_scene").appendChild(el_audio);el_audio.addEventListener("sound-loaded",function(){TYRANO.kag.ftag.nextOrder()})}};tyrano.plugin.kag.tag.stopbgm={vital:["name"],pm:{name:""},start:function(pm){var that=this;var j_audio=$("."+pm.name);j_audio.remove();TYRANO.kag.ftag.nextOrder()}};
tyrano.plugin.kag.tag.playse={vital:[],pm:{id:"",name:"",storage:"",loop:"false",x:"0",y:"0",z:"0",layer:"space",target_name:"",volume:"100"},start:function(pm){var that=this;var el_audio=document.createElement("a-entity");el_audio.setAttribute("position",{x:pm.x,y:pm.y,z:pm.z});if(pm.id!=""){$.vr.checkAsset(pm.id);el_audio.setAttribute("sound","src","#"+pm.id)}else{$.vr.exists(pm.storage);pm.id=pm.storage;el_audio.setAttribute("sound","src","url(data/sound/"+pm.storage+")")}el_audio.setAttribute("sound",
"loop",pm.loop);el_audio.setAttribute("sound","autoplay","true");var volume=$.cutFloat(parseFloat(pm.volume)/100,3);el_audio.setAttribute("sound","volume",volume);if(pm.name=="")pm.name=pm.id;$.vr.setName(el_audio,pm.name);if(pm.layer=="space")document.querySelector("#vr_scene").appendChild(el_audio);else document.querySelector("#vr_camera").appendChild(el_audio);el_audio.addEventListener("sound-loaded",function(){TYRANO.kag.ftag.nextOrder()})}};
tyrano.plugin.kag.tag.stopse={vital:["name"],pm:{name:""},start:function(pm){var that=this;var j_audio=$("."+pm.name);j_audio.remove();TYRANO.kag.ftag.nextOrder()}};
