tyrano.plugin.kag.key_mouse={kag:null,keyconfig:{key:{}},map_key:{},map_mouse:{},map_ges:{},is_swipe:false,timeoutId:0,is_keydown:false,start_point:{x:0,y:0},end_point:{x:0,y:0},init:function(){var that=this;this.keyconfig=__tyrano_key_config;this.map_key=this.keyconfig["key"];this.map_mouse=this.keyconfig["mouse"];this.map_ges=this.keyconfig["gesture"];$(document).keydown(function(e){if(that.is_keydown==true)return false;that.is_keydown=true;var keycode=e.keyCode;if(that.map_key[keycode])if(typeof that.map_key[keycode]==
"function")that.map_key[keycode]();else if(that[that.map_key[keycode]])that[that.map_key[keycode]]()});$(document).keyup(function(e){that.is_keydown=false;var keycode=e.keyCode;if(keycode==91||keycode==17)that.kag.stat.is_skip=false});var mousewheelevent="onwheel"in document?"wheel":"onmousewheel"in document?"mousewheel":"DOMMouseScroll";$(document).on(mousewheelevent,function(e){if(!that.canShowMenu())return;if($(".menu_close").size()>0&&$(".layer_menu").css("display")!="none")return;var delta=e.originalEvent.deltaY?
-e.originalEvent.deltaY:e.originalEvent.wheelDelta?e.originalEvent.wheelDelta:-e.originalEvent.detail;var target=null;if(delta<0)target=that.map_mouse["wheel_down"];else target=that.map_mouse["wheel_up"];if(typeof target=="function")target();else if(that[target])that[target]()})},next:function(){if(this.kag.key_mouse.canClick()){$("#vr_message").remove();TYRANO.kag.ftag.nextOrder()}},showmenu:function(){if(this.canShowMenu())if($(".menu_close").size()>0&&$(".layer_menu").css("display")!="none")$(".menu_close").click();
else $(".button_menu").click()},hidemessage:function(){if(this.canShowMenu())if($(".menu_close").size()>0&&$(".layer_menu").css("display")!="none")$(".menu_close").click();else if(!this.kag.stat.is_strong_stop)if(this.kag.stat.is_hide_message)this.kag.layer.showMessageLayers();else this.kag.ftag.startTag("hidemessage")},save:function(){this._role("save")},load:function(){this._role("load")},menu:function(){this._role("menu")},title:function(){this._role("title")},skip:function(){if(this.canClick())this._role("skip")},
backlog:function(){this._role("backlog")},fullscreen:function(){this._role("fullscreen")},qsave:function(){this._role("quicksave")},qload:function(){this._role("quickload")},auto:function(){this._role("auto")},canClick:function(){if(this.kag.stat.is_adding_text==true)return false;if($(".layer_event_click").css("display")!="none"&&$(".layer_menu").css("display")=="none")return true;return false},canShowMenu:function(){if(this.kag.layer.layer_event.css("display")=="none"&&this.kag.stat.is_strong_stop!=
true)return false;if(this.kag.stat.is_wait==true)return false;return true}};
