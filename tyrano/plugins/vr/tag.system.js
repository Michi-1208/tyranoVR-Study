tyrano.plugin.kag.tag.button={vital:["id"],pm:{id:"",name:"",folder:"",storage:"",layer:"space",x:"0",y:"0",z:"0",xr:"0",yr:"0",zr:"0",clickse:"",enterse:"",leavese:"",time:"1000",wait:"true",trigger:"hand",scale:"1",storage:"",target:""},start:function(pm){var that=this;var el_img=document.createElement("a-image");el_img.setAttribute("src","#"+pm.id);var data_width=$("#vr_assets").find("#"+pm.id).attr("data-width");var data_height=$("#vr_assets").find("#"+pm.id).attr("data-height");data_width=data_width/
100*parseFloat(pm.scale);data_height=data_height/100*parseFloat(pm.scale);var prime_id=pm.id+"-"+$.random();el_img.setAttribute(prime_id);el_img.setAttribute("material","alphaTest:0.01");el_img.setAttribute("width",$.cutFloat(data_width,3));el_img.setAttribute("height",$.cutFloat(data_height,3));el_img.setAttribute("position",{x:pm.x,y:pm.y,z:pm.z});el_img.setAttribute("rotation",{x:pm.xr,y:pm.yr,z:pm.zr});el_img.setAttribute("opacity",0);if(pm.name=="")pm.name=pm.id;$.vr.setName(el_img,pm.name);
if(pm.trigger=="hand"||pm.trigger=="all")el_img.classList.add("evtobj");if(pm.trigger=="eye"||pm.trigger=="all")el_img.classList.add("evteye");if(pm.layer=="space")document.querySelector("#vr_scene").appendChild(el_img);else document.querySelector("#vr_camera").appendChild(el_img);AFRAME.registerComponent(prime_id,{init:function(){var el=this.el;var material=el.getAttribute("material");var initialColor=material.color;var self=this;var button_clicked=false;el.addEventListener("click",function(evt){if(button_clicked==
true&&_pm.fix=="false")return false;if(that.kag.stat.is_strong_stop!=true&&_pm.fix=="false")return false;button_clicked=true;if(pm.clickse!="")$.vr.sound(pm.clickse);that.kag.ftag.startTag("jump",pm)});el.addEventListener("mouseenter",function(){if(pm.enterse!="")$.vr.sound(pm.enterse);self.isMouseEnter=true});el.addEventListener("mouseleave",function(){if(pm.leavese!="")$.vr.sound(pm.leavese);self.isMouseEnter=false})}});$.vr.fadeIn(el_img,{time:pm.time},function(e){if(pm.wait=="true")TYRANO.kag.ftag.nextOrder()});
if(pm.wait=="false")TYRANO.kag.ftag.nextOrder()}};tyrano.plugin.kag.tag.hand={vital:[],pm:{color:"",visible:""},start:function(pm){var that=this;var j_hand=$(".hand_controll");if(pm.visible!=""){j_hand.attr("visible",pm.visible);this.kag.stat.hand.visible=pm.visible}if(pm.color!=""){j_hand.attr("line","color:"+$.convertColor(pm.color));this.kag.stat.hand.color=pm.color}TYRANO.kag.ftag.nextOrder()}};
tyrano.plugin.kag.tag.eye={vital:[],pm:{color:"",visible:"",time:""},start:function(pm){var that=this;var j_eye=$("#eye_cast");var time=1E3;if(pm.time!="")time=pm.time;if(pm.visible!="")j_eye.attr("visible",pm.visible);if(pm.color!="")j_eye.attr("color",$.convertColor(pm.color));j_eye.attr("fuse-timeout",time);j_eye.find("a-animation").remove();j_eye.append('<a-animation id="eye_cast_anim" begin="cursor-fusing" easing="ease-in" attribute="scale" dur="'+time+'" fill="backwards" from="1 1 1" to="0.1 0.1 0.1"></a-animation>');
TYRANO.kag.ftag.nextOrder()}};tyrano.plugin.kag.tag.sky={vital:["color"],pm:{color:""},start:function(pm){$("a-sky").remove();var that=this;var el_img=document.createElement("a-sky");el_img.setAttribute("color",$.convertColor(pm.color));el_img.setAttribute("material","");el_img.setAttribute("geometry","");el_img.setAttribute("scale","");document.querySelector("#vr_scene").appendChild(el_img);TYRANO.kag.ftag.nextOrder()}};
